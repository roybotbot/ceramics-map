# MA Pottery Studios Map — Design Plan

**UI System:** Dark Mono Digital  
**Stack:** Vanilla HTML/CSS/JS · Leaflet.js · OpenStreetMap · GeoJSON  
**Deployment:** Cloudways (static file hosting)  
**Date:** 2026-02-20

---

## Overview

A single-page static map of pottery studios in Massachusetts, styled with the Dark Mono Digital UI system. The aesthetic — pixel display typography, dark surfaces, one warm accent — suits a craft-focused directory: tactile, artisanal, slightly analog-feeling against a dark screen.

No build step. No framework. No backend. Three files: `index.html`, `studios.json`, `geocode.py`.

---

## Visual Concept

The page reads as a dark terminal/instrument panel housing a map. VT323 pixel font labels everything. The map itself sits in the center of the layout, bordered by a filter sidebar. Popups match the card anatomy from the design system. The overall effect: a dot-matrix era field guide.

---

## File Structure

```
clay-map/
├── index.html          # Full app — map + UI
├── studios.json        # GeoJSON data (generated by geocode.py)
├── geocode.py          # Address → GeoJSON script
├── README.md
└── docs/
    └── plans/
        └── 2026-02-20-pottery-map-design.md
```

---

## Color Application to Map Components

| Element | Token | Value |
|---|---|---|
| Page background | `--bg-base` | `#0D0D0D` |
| Sidebar / filter panel | `--bg-surface` | `#1A1A1A` |
| Popup card | `--bg-surface-raised` | `#242424` |
| Search input | `--bg-input` | `#2A2A2A` |
| Primary text | `--text-primary` | `#F0EDE8` |
| Labels / timestamps | `--text-secondary` | `#8A8A8A` |
| Inactive / muted | `--text-muted` | `#5A5A5A` |
| Active marker / checked filter | `--accent` | `#F27A3E` |
| Borders | `--border-subtle` | `#2A2A2A` |

The map tiles will render in a dark style. Use the CartoDB Dark Matter tile layer instead of standard OSM — it matches the palette exactly and requires no API key.

**Tile URL:**
```
https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png
```
Attribution: `© OpenStreetMap contributors © CARTO`

---

## Typography on the Page

| Element | Font | Size | Transform |
|---|---|---|---|
| Page title: "MA POTTERY STUDIOS" | VT323 | 32px | UPPERCASE |
| Filter panel heading: "FILTER" | VT323 | 20px | UPPERCASE |
| Popup studio name | VT323 | 22px | UPPERCASE |
| Filter checkbox labels | VT323 | 16px | UPPERCASE |
| Studio address in popup | Inter | 14px | none |
| Studio tags (Classes · Open Studio) | VT323 | 13px | UPPERCASE |
| Search placeholder | Inter | 15px | none |

Google Fonts load: `VT323` + `Inter` + `IBM Plex Mono`

---

## Layout Structure

```
┌─────────────────────────────────────────────────────────┐
│  HEADER: "MA POTTERY STUDIOS"  [VT323, 32px, centered]  │  bg-surface, 48px tall
├──────────────────┬──────────────────────────────────────┤
│  FILTER SIDEBAR  │                                      │
│  bg-surface      │         MAP                          │
│  280px wide      │         (Leaflet, fills remaining)   │
│                  │         CartoDB Dark Matter tiles     │
│  [Search input]  │                                      │
│                  │                                      │
│  ☐ CLASSES       │                                      │
│  ☐ OPEN STUDIO   │                                      │
│  ☐ MEMBER        │                                      │
│    STUDIOS       │                                      │
│                  │                                      │
│  [studio count]  │                                      │
│  "12 STUDIOS"    │                                      │
└──────────────────┴──────────────────────────────────────┘
```

**Mobile (≤768px):** Sidebar collapses to a bottom drawer. A floating "FILTER" pill button (accent-colored) opens/closes it. Map takes full viewport height.

---

## Components

### Header

```css
height: 56px;
background: var(--bg-surface);
border-bottom: 1px solid var(--border-subtle);
display: flex;
align-items: center;
padding: 0 24px;
```

Title uses VT323 at 32px uppercase. Right side of header: a small accent dot (6px) + "MASSACHUSETTS" label in `--text-secondary` at 13px IBM Plex Mono — pure decorative flavor.

---

### Filter Sidebar

```css
width: 280px;
background: var(--bg-surface);
border-right: 1px solid var(--border-subtle);
padding: 20px;
display: flex;
flex-direction: column;
gap: 20px;
```

**Search Input** — full design system spec:
```css
background: var(--bg-input);
border: none;
border-radius: 12px;
padding: 14px 16px;
font-family: Inter, sans-serif;
font-size: 15px;
color: var(--text-primary);
```
Placeholder: `"search studios..."` (lowercase, casual, per system guidelines).

**Filter Section Heading:**
```
"FILTER" — VT323, 14px, --text-secondary, uppercase, letter-spacing 0.1em
```

**Checkboxes** — custom styled, no browser default:
- Unchecked: 16px square, `border: 1.5px solid var(--text-muted)`, `border-radius: 4px`
- Checked: background `var(--accent)`, checkmark icon in `var(--bg-base)`
- Label: VT323, 16px, uppercase, `var(--text-primary)`
- Spacing between checkboxes: 12px

**Studio Count:**
```
"14 STUDIOS" — VT323, 20px, --text-secondary
Updates live as filters change.
```

---

### Map Container

Leaflet fills the remaining space after header + sidebar. Map background defaults to tile layer; no additional background needed. Leaflet controls (zoom ±) must be re-styled to match the system:

```css
/* Override Leaflet controls */
.leaflet-control-zoom a {
  background: var(--bg-surface-raised);
  color: var(--text-primary);
  border: 1px solid var(--border-subtle);
  font-family: var(--font-display);
}
.leaflet-control-zoom a:hover {
  background: var(--bg-input);
  color: var(--accent);
}
```

Attribution text: `--text-muted`, 11px, italic off.

---

### Map Markers

Custom SVG markers — no default Leaflet blue pins.

**Default marker:** A 10px filled circle  
- Fill: `var(--text-primary)` (`#F0EDE8`)
- Stroke: `var(--bg-base)` 1.5px
- CSS pulse animation on hover (scale 1.4, 150ms ease-out — within system animation rules)

**Clustered markers** (Leaflet.markercluster):
- Override cluster icon: dark rounded circle, `--bg-surface-raised` background
- Number label: VT323 font, `--text-primary`
- Outer ring: `1.5px solid var(--accent)` when cluster has ≥5 markers

SVG marker definition:
```js
const studioIcon = L.divIcon({
  className: '',
  html: `<svg width="14" height="14" viewBox="0 0 14 14">
    <circle cx="7" cy="7" r="5"
      fill="#F0EDE8" stroke="#0D0D0D" stroke-width="1.5"/>
  </svg>`,
  iconSize: [14, 14],
  iconAnchor: [7, 7],
  popupAnchor: [0, -10]
});
```

---

### Popup Card

Styled to match the design system card anatomy. Override Leaflet's default popup styles entirely.

```css
.leaflet-popup-content-wrapper {
  background: var(--bg-surface-raised);
  border-radius: 16px;
  border: 1px solid var(--border-subtle);
  padding: 0;
  box-shadow: 0 4px 24px rgba(0,0,0,0.5);
}
.leaflet-popup-tip {
  background: var(--bg-surface-raised);
}
.leaflet-popup-content {
  margin: 0;
  width: 240px;
}
```

**Popup inner layout:**

```
┌────────────────────────────┐
│  MUDFLAT STUDIO            │  VT323, 22px, --text-primary
│  35 Medford St, Somerville │  Inter, 13px, --text-secondary
│                            │  12px gap
│  [CLASSES] [OPEN STUDIO]   │  tag pills, see below
│                            │  16px gap
│  [↗ WEBSITE]               │  ghost button, small
└────────────────────────────┘
  padding: 20px
```

**Feature tags** (Classes, Open Studio, Member Studios):
```css
display: inline-block;
font-family: VT323, monospace;
font-size: 12px;
text-transform: uppercase;
letter-spacing: 0.08em;
padding: 3px 8px;
border-radius: 999px;
border: 1px solid var(--border-subtle);
color: var(--text-secondary);
background: var(--bg-surface);
margin-right: 4px;
```
Active tags (when the studio has that feature): `color: var(--accent); border-color: var(--accent);`

**Website link button** — ghost style, small:
```css
font-family: VT323;
font-size: 13px;
padding: 6px 14px;
border: 1.5px solid var(--text-muted);
border-radius: 999px;
color: var(--text-secondary);
background: transparent;
```
On hover: `border-color: var(--accent); color: var(--accent);`

---

## Mobile Behavior (≤768px)

- Sidebar hidden by default, slides up from bottom as a drawer (`transform: translateY(100%)` → `translateY(0)`)
- Drawer height: 60% of viewport, `border-radius: 16px 16px 0 0` (top corners only)
- Floating trigger button: fixed bottom-right, `--accent` fill, pill shape, "FILTER" label in VT323
- Map takes full `100dvh`

---

## JavaScript Architecture

All vanilla JS, no modules (no bundler). Structure within `index.html`:

```
1. CSS variables + base styles
2. HTML: header, sidebar, map div
3. Google Fonts link tags
4. Leaflet + Leaflet.markercluster CDN scripts
5. <script> block:
   - Initialize map
   - Fetch studios.json
   - Build markers from GeoJSON features
   - Attach popup HTML to each marker
   - Filter logic (checkbox change + search input)
   - Mobile drawer toggle
```

**Filter logic:**
```js
function applyFilters() {
  const query = searchInput.value.toLowerCase();
  const wantsClasses = cbClasses.checked;
  const wantsOpen = cbOpen.checked;
  const wantsMember = cbMember.checked;

  let count = 0;
  markers.forEach(({ marker, props }) => {
    const nameMatch = props.name.toLowerCase().includes(query);
    const classMatch = !wantsClasses || props.classes;
    const openMatch = !wantsOpen || props.open_studio;
    const memberMatch = !wantsMember || props.member_studios;
    const visible = nameMatch && classMatch && openMatch && memberMatch;
    visible ? markerCluster.addLayer(marker) : markerCluster.removeLayer(marker);
    if (visible) count++;
  });
  countLabel.textContent = `${count} STUDIOS`;
}
```

---

## CDN Dependencies

```html
<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=VT323&family=Inter:wght@400;500&family=IBM+Plex+Mono&display=swap" rel="stylesheet">

<!-- Leaflet CSS + JS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- MarkerCluster -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
```

---

## geocode.py Spec

Unchanged from the original plan. Outputs valid GeoJSON `FeatureCollection` to `studios.json`. Properties per feature:

```json
{
  "name": "",
  "address": "",
  "website": "",
  "phone": "",
  "classes": true,
  "open_studio": false,
  "member_studios": false,
  "notes": ""
}
```

Nominatim rate limit: 1 second between requests. User-Agent: `"ma-pottery-map/1.0"`. Failures print warning, skip, don't crash. GeoJSON coordinates: `[longitude, latitude]` order.

---

## Acceptance Criteria

- [ ] `python3 geocode.py` produces valid GeoJSON with all seed studios
- [ ] Map loads with CartoDB dark tiles centered on MA
- [ ] Custom SVG markers render correctly
- [ ] Cluster circles appear at zoom 8, styled in dark mono
- [ ] Popup cards match design system card anatomy
- [ ] Filter checkboxes hide/show markers in real time
- [ ] Studio count label updates on filter change
- [ ] Name search filters as you type
- [ ] Mobile: filter drawer opens/closes correctly
- [ ] All text uses VT323 for headings/labels, Inter for body
- [ ] Accent color (`#F27A3E`) used only on active states, not large surfaces
- [ ] No default Leaflet blue pins visible anywhere
- [ ] Page works on 375px wide mobile screen

---

# Cloudways Deployment Instructions

## What You're Deploying

A fully static site: one HTML file + one JSON file. No PHP, no Node, no database. Cloudways will serve it directly from the webroot like any static asset.

---

## Prerequisites

- Active Cloudways account with at least one server provisioned
- An application on that server (any PHP app type works — you're just using the webroot)
- SSH or SFTP access enabled
- A domain or the default Cloudways test domain (`.cloudwaysapps.com`)

---

## Option A — SFTP Upload (Simplest)

### Step 1: Get your SFTP credentials

1. Log into Cloudways → **Servers** → select your server
2. Go to **Master Credentials** tab
3. Note: **Server IP**, **Master Username**, **Master Password**
4. Also note the application's **webroot path** — go to **Applications** → your app → **Access Details** → **Application Path** (e.g. `/home/master/applications/abcdef/public_html`)

### Step 2: Connect via SFTP

Use any SFTP client (FileZilla, Cyberduck, Transmit):

```
Host:     <your-server-IP>
Username: <master-username>
Password: <master-password>
Port:     22
```

### Step 3: Upload files

Navigate to your application's `public_html` folder. Upload these two files:

```
index.html
studios.json
```

That's it. If `public_html` already has a default WordPress or other app, you can:
- **Replace it** (delete existing files, upload yours), or
- **Create a subfolder** e.g. `public_html/pottery/` and upload there (site will be at `yourdomain.com/pottery/`)

> ⚠️ If you upload to a subfolder, `fetch('studios.json')` in `index.html` still works because both files are at the same relative path. No changes needed.

### Step 4: Verify

Open your browser to `https://your-app-domain.cloudwaysapps.com` (or your custom domain). You should see the dark map load.

---

## Option B — Git Deployment (Recommended for ongoing updates)

Cloudways supports pulling from a Git repo on deploy. This lets you push changes from your local machine and pull them to the server with one command.

### Step 1: Create a GitHub repo

```bash
# In your clay-map project directory
git init
git add index.html studios.json README.md
git commit -m "initial build"
gh repo create clay-map --public --push
# or: git remote add origin https://github.com/YOU/clay-map.git && git push -u origin main
```

### Step 2: Enable Git deployment in Cloudways

1. Cloudways → **Applications** → your app → **Deployment via Git**
2. Click **Generate SSH Key** — copy the public key
3. Go to GitHub → **Settings** → **SSH and GPG Keys** → **New SSH Key** → paste it
4. Back in Cloudways Git deployment:
   - **Repo URL:** `git@github.com:YOU/clay-map.git`
   - **Branch:** `main`
   - **Deploy Path:** `/` (deploys to `public_html` root)
5. Click **Save** then **Pull**

### Step 3: Future deploys

Whenever you update `studios.json` or `index.html` locally:

```bash
git add -A
git commit -m "add new studios"
git push
```

Then in Cloudways: **Applications** → your app → **Deployment via Git** → **Pull**.

Or trigger a deploy via the Cloudways API/CLI if you want to automate it.

---

## Option C — SSH + rsync (Power User)

If you prefer terminal-only deploys:

```bash
# From your local clay-map directory
rsync -avz --include="index.html" --include="studios.json" \
  --exclude="*" \
  ./ master@YOUR_SERVER_IP:/home/master/applications/APPID/public_html/
```

Replace `APPID` with your application's folder name (visible in SFTP or SSH).

---

## Setting Up a Custom Domain (Optional)

1. Cloudways → **Applications** → your app → **Domain Management**
2. Add your domain (e.g. `pottery.yourdomain.com`)
3. At your DNS registrar, add a CNAME record:
   ```
   pottery  CNAME  your-app.cloudwaysapps.com
   ```
4. Back in Cloudways → **SSL Certificate** tab → **Let's Encrypt** → enter domain → **Install**

HTTPS is free via Let's Encrypt. Takes ~2 minutes.

---

## Local Development (Before Deploying)

`fetch('studios.json')` does **not** work if you double-click `index.html` locally (CORS on `file://`). Always use:

```bash
cd clay-map
python3 -m http.server 8000
# open http://localhost:8000
```

---

## Generating the Studio Data

Before deploying, run the geocoder once to populate `studios.json`:

```bash
pip3 install requests
python3 geocode.py
# Wait ~15 seconds (rate-limited). Check studios.json was created.
```

Commit `studios.json` to your repo — it's the source of truth. Re-run `geocode.py` only when doing bulk re-geocoding.

---

## Summary Checklist

- [ ] Run `python3 geocode.py` → verify `studios.json` has features
- [ ] Test locally with `python3 -m http.server 8000` → map loads, popups work
- [ ] Choose deploy method: SFTP / Git / rsync
- [ ] Upload `index.html` + `studios.json` to `public_html`
- [ ] Verify live URL loads correctly
- [ ] (Optional) Add custom domain + SSL in Cloudways
